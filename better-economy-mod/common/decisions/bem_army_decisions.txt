bem_build_army = {
	is_shown = {
		always = yes
	}

	possible = {
		NOT = {
			has_variable = bpm_built_army
		}
	}

	when_taken = {
		every_scope_state = {
			save_scope_as = military_state
			owner = {
				# create_military_formation = {
				# 	type = army
				# 	hq_region = root.capital.region
				# 	combat_unit = {
				# 		type = unit_type:combat_unit_type_irregular_infantry
				# 		count = 1
				# 		state_region = scope:military_state.state_region
				# 	}
				# }
				save_scope_value_as = {
					name = exlvl
					value = {
						value = 1
						if = {
							limit = {
								has_building = building_barracks
							}
							add = b:building_barracks.level
						}
					}
				}
				create_building = {
					building = building_barracks
					level = scope:exlvl
				}		
				hidden_effect = {
					add_treasury = -50000
				}
			}
		}
		show_as_tooltip = {
			add_treasury = {
				value = -50000
				multiply = {
					value = 0
					every_scope_state = {
						add = 1
					}
				}
			}
		}
		set_variable = {
			name = bpm_built_army
			days = 180
		}
	}

	ai_chance = {
		value = 0
		if = {
			limit = {
				gold_reserves > 500000
			}
			add = 999
		}
	}
}

bem_build_navy = {
	is_shown = {
		always = yes
	}

	possible = {
		NOT = {
			has_variable = bpm_built_army
		}
	}

	when_taken = {
		every_scope_state = {
			limit = {
				is_coastal = yes
			}
			save_scope_as = coastal_state
			owner = {
				create_military_formation = {
					type = fleet
					hq_region = root.capital.region
					combat_unit = {
						type = unit_type:combat_unit_type_frigate
						count = 1
						state_region = scope:coastal_state.state_region
					}
				}
				create_military_formation = {
					type = fleet
					hq_region = root.capital.region
					combat_unit = {
						type = unit_type:combat_unit_type_man_o_war
						count = 1
						state_region = scope:coastal_state.state_region
					}
				}
				hidden_effect = {
					add_treasury = -100000
				}
			}
		}

		show_as_tooltip = {
			add_treasury = {
				value = -100000
				multiply = {
					value = 0
					every_scope_state = {
						limit = {
							is_coastal = yes
						}
						add = 1
					}
				}
			}
		}
		
		set_variable = {
			name = bpm_built_army
			days = 180
		}
	}

	ai_chance = {
		value = 0
		if = {
			limit = {
				gold_reserves > 5000000
			}
			add = 999
		}
	}
}